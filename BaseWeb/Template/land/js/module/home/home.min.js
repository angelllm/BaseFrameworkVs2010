define(function(a,b,c){var d=avalon.define({$id:"box",list:[],toplist:[],flag:!0,displaytype:1,clickme:0,content:"",loadones:!0,totalpagecount:0,totalcount:0,pages:[],initPage:function(a){d.pages=[];for(var b=0;a>b;b++)d.pages.push(b)},initLoading:function(){d.loadones=!0},init:function(){d.getlist(),d.gettoplist(),d.initTip()},simpleInit:function(){d.getlist(),d.initTip()},MusicInit:function(){d.options={pagesize:10,pageindex:1,w:"music"},d.getlist(),d.initTip()},initParama:function(){var a=$("#uri").val(),b=a.match(/\d+(\.\d+)?/g);b&&!isNaN(b[0])&&1==b.length?d.options.w=b[0]:d.options.w="/land/list/"==a?"":a},options:{pagesize:10,pageindex:1,w:""},initTip:function(){$(".simptip-smooth.simptip-movable").each(function(a,b){$(b).width()>420&&$(b).removeClass("simptip-position-right").addClass("simptip-position-bottom")})},givepagecss:function(a){return $(a).addClass("current").siblings().removeClass("current"),$("body,html").animate({scrollTop:0},200),!1},show:function(){$("center").hide(),$(".fadeInDown").fadeIn(300),$(".ias-trigger-next,.nav-inside").show()},getlist:function(a,b,c){a&&(a.pageindex<=0||a.pageindex>d.totalpagecount)||(d.options=$.extend(d.options,a),$.ajax({url:"/land/getlist/",async:!0,data:d.options,type:"post",beforeSend:function(){b&&b()},success:function(a){if(a.length<=0)return void(d.list=[]);d.list=a,d.newscount=a.length;var b=a[0].article_cid%d.options.pagesize==0?a[0].article_cid/d.options.pagesize:parseInt(a[0].article_cid/d.options.pagesize)+1;d.loadones&&(d.initPage(b),d.loadones=!1,d.totalpagecount=b),d.initTip(),c&&avalon.isFunction(c)&&c()},error:function(a){}}))},gettoplist:function(){$.ajax({url:"/land/getTopList/",data:{pagesize:3,pageindex:1,q:""},type:"post",beforeSend:function(){},success:function(a){d.toplist=[],d.toplist=a},error:function(a){}})},nextPage:function(){if(d.flag){if(d.clickme>=d.totalpagecount)return void $(this).find("a").text("^-^\u6ca1\u6709\u4e86");var a=$(this);d.clickme++,d.content="",d.content=$("#content .posts").clone().addClass("clone");var c=($("body").scrollTop(),d.options.pageindex+1);d.getlist({pageindex:c},function(){d.flag=!1,a.addClass("loading").children("a").text("\u6b63\u5728\u52a0\u8f7d..."),$("#content .clone").remove()},function(){d.flag=!0,1==d.displaytype&&($("#app").after(d.content),$("body,html").animate({scrollTop:$(".posts.clone").last().next().offset().top-100},300),a.removeClass("loading").children("a").text("\u52a0\u8f7d\u66f4\u591a"))})}},addLive:function(a){var b=$(this);b.data("data-live")||$.ajax({url:"/land/addLive/",data:{id:a},type:"post",beforeSend:function(){},success:function(a){var c=parseInt(b.text());b.html('<i class="fa fa-heart-o"></i> '+(c+1)),b.data("data-live","live")},error:function(a){}})}});c.exports={init:d.init,simpleInit:d.simpleInit,initParama:d.initParama,initLoading:d.initLoading}});